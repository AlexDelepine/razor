steps:
  - task: NuGetAuthenticate@1
    inputs:
      nuGetServiceConnections: 'devdiv/dotnet-core-internal-tooling'
      forceReinstallCredentialProvider: true

    # Needed to restore the Microsoft.DevDiv.Optimization.Data.PowerShell package
    - task: NuGetCommand@2
      displayName: Restore internal tools
      inputs:
        command: restore
        feedsToUse: config
        restoreSolution: 'eng\common\internal\Tools.csproj'
        nugetConfigPath: 'NuGet.config'
        restoreDirectory: '$(Build.SourcesDirectory)\.packages'

